<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>Customer Dashboard | CCMS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">

  <style>
    /* 1. CLEAN THEME BACKGROUND */
    body {
        font-family: 'Poppins', sans-serif;
        background-color: #e3e6e8; /* Light Gray */
        min-height: 100vh;
        color: #333;
        padding-top: 60px;
        overflow-x: hidden;
    }

    /* 2. NAVBAR STYLING (FIXED) */
    .navbar {
        background-color: #ffffff;
        box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        border-bottom: 1px solid #e9ecef;
        height: 60px;
        z-index: 1030;
    }

    .navbar-brand {
        font-weight: 700;
        letter-spacing: 1px;
        font-size: 1.3rem;
        color: #0d6efd !important;
    }

    /* 3. SIDEBAR NAVIGATION (FIXED) */
    .sidebar {
        position: fixed;
        top: 60px;
        bottom: 0;
        left: 0;
        z-index: 100;
        padding: 20px 0;
        box-shadow: inset -1px 0 0 rgba(0, 0, 0, .1);
        overflow-y: auto;
        background-color: #ffffff;
    }

    .nav-link-custom {
        color: #6c757d;
        padding: 10px 24px;
        margin-bottom: 4px;
        font-size: 0.9rem;
        font-weight: 500;
        display: flex;
        align-items: center;
        text-decoration: none;
        transition: all 0.2s ease-in-out;
    }
    .nav-link-custom i { margin-right: 12px; font-size: 1.1rem; color: #adb5bd; }
    .nav-link-custom:hover { color: #0d6efd; background-color: #f1f5f9; }
    .nav-link-custom:hover i { color: #0d6efd; }
    .nav-link-custom.active { color: #fff; background-color: #0d6efd; }
    .nav-link-custom.active i { color: #fff; }

    /* 4. CONTENT PANELS */
    .content-card {
        background-color: #ffffff;
        border: 1px solid #e9ecef;
        border-radius: 12px;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
    }

    /* 5. STATS & TABLES */
    .stat-label { font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.05em; color: #6c757d; margin-bottom: 4px; }
    .stat-value { font-size: 1.75rem; font-weight: 600; color: #212529; }

    .table-pro { --bs-table-bg: transparent; --bs-table-color: #333; }
    .table-pro th { font-weight: 600; font-size: 0.85rem; color: #6c757d; border-bottom: 2px solid #f1f5f9; padding-bottom: 12px; }
    .table-pro td { padding: 16px 0.75rem; vertical-align: middle; border-bottom: 1px solid #f1f5f9; }
    .table-pro tr:last-child td { border-bottom: 0; }

    /* 6. UTILITIES */
    .btn-primary-pro { background-color: #0d6efd; border-color: #0d6efd; color: white; padding: 8px 16px; font-size: 0.9rem; border-radius: 6px; font-weight: 500; }
    .btn-primary-pro:hover { background-color: #0b5ed7; border-color: #0b5ed7; }

    .dropdown-menu-pro {
        background-color: #ffffff;
        border: 1px solid #e9ecef;
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        margin-top: 10px;
        min-width: 280px;
        padding: 0;
    }

    .profile-header-label {
        font-size: 0.7rem;
        font-weight: 700;
        color: #adb5bd;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        margin-bottom: 2px;
    }

    .profile-value {
        font-size: 0.9rem;
        color: #333;
        font-weight: 500;
        margin-bottom: 12px;
    }
  </style>
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-light px-4 fixed-top">
  <div class="container-fluid">
    <a class="navbar-brand" href="#">CCMS <span class="badge bg-primary rounded-pill fs-6 ms-1" style="font-size: 0.7rem !important; vertical-align: middle;">CUSTOMER</span></a>

    <button class="navbar-toggler d-md-none collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="ms-auto d-flex gap-3 align-items-center">
      <div class="dropdown">
        <button class="btn btn-link text-decoration-none dropdown-toggle no-caret p-0 d-flex align-items-center"
                type="button" id="profileDropdown" data-bs-toggle="dropdown" aria-expanded="false">
          <div class="bg-primary bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center me-2" style="width: 35px; height: 35px;">
            <i class="bi bi-person-fill text-primary small"></i>
          </div>
          <span class="small fw-medium text-dark d-none d-sm-inline">My Profile</span>
        </button>

        <ul class="dropdown-menu dropdown-menu-pro dropdown-menu-end" aria-labelledby="profileDropdown">
          <li>
            <div class="px-4 py-3">
              <div class="text-center mb-3">
                <div class="bg-light rounded-circle d-inline-flex align-items-center justify-content-center" style="width: 50px; height: 50px;">
                  <i class="bi bi-person-fill fs-3 text-secondary"></i>
                </div>
              </div>

              <div>
                <div class="profile-header-label">Username</div>
            <div class="profile-value" >CustomerUser</div> <!--    th:text="${user.username}"-->
              </div>

              <div>
                <div class="profile-header-label">Email Address</div>
                <div class="profile-value">customer@ccms.com</div>
              </div>

              <div>
                <div class="profile-header-label">Mobile Number</div>
                <div class="profile-value">+1 123 456 7890</div>
              </div>

              <div>
                <div class="profile-header-label">Role</div>
                <div class="profile-value">
                  <span class="badge bg-primary bg-opacity-10 text-primary fw-normal border border-primary border-opacity-10">CUSTOMER</span>
                </div>
              </div>

            </div>
          </li>
          <li><hr class="dropdown-divider my-0"></li>
          <li class="p-2">
            <a th:href="@{/logout}" class="btn btn-outline-danger w-100 btn-sm d-flex align-items-center justify-content-center gap-2">
              <i class="bi bi-box-arrow-right"></i> Logout
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</nav>

<div class="container-fluid">
  <div class="row">

    <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block sidebar collapse">
      <div class="d-flex flex-column h-100">
        <a th:href="@{/customer/dashboard}" class="nav-link-custom active">
          <i class="bi bi-grid"></i> Dashboard
        </a>
        <a th:href="@{/cards}" class="nav-link-custom">
          <i class="bi bi-credit-card"></i> My Cards
        </a>
        <a th:href="@{/transactions/user/1}" class="nav-link-custom">
          <i class="bi bi-arrow-left-right"></i> Transactions
        </a>
        <a th:href="@{/bills}" class="nav-link-custom">
          <i class="bi bi-receipt"></i> Bills & Payments
        </a>
        <a th:href="@{/support}" class="nav-link-custom">
          <i class="bi bi-question-circle"></i> Support Center
        </a>
      </div>
    </nav>

    <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4 pt-4">

      <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
          <h4 class="fw-semibold mb-1 text-dark">
            Welcome, <span>User</span>!
          </h4>
        </div>
        <a th:href="@{/transactions/new}" class="btn btn-primary-pro d-flex align-items-center gap-2">
          <i class="bi bi-plus-lg"></i> <span>Make Transaction</span>
        </a>
      </div>

      <div class="row g-4 mb-4">
        <div class="col-md-4">
          <div class="content-card p-4 h-100 d-flex flex-column justify-content-center">
            <div class="d-flex justify-content-between align-items-start mb-2">
              <span class="stat-label">Total Limit</span>
              <div class="bg-primary bg-opacity-10 p-2 rounded">
                <i class="bi bi-shield-check text-primary"></i>
              </div>
            </div>
            <div class="stat-value" th:text="${#numbers.formatCurrency(totalLimit)}">$10,000</div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="content-card p-4 h-100 d-flex flex-column justify-content-center">
            <div class="d-flex justify-content-between align-items-start mb-2">
              <span class="stat-label">Available Credit</span>
              <div class="bg-success bg-opacity-10 p-2 rounded">
                <i class="bi bi-graph-up-arrow text-success"></i>
              </div>
            </div>
            <div class="stat-value text-success" th:text="${#numbers.formatCurrency(availableBalance)}">$7,450</div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="content-card p-4 h-100 d-flex flex-column justify-content-center">
            <div class="d-flex justify-content-between align-items-start mb-2">
              <span class="stat-label">Current Due</span>
              <div class="bg-danger bg-opacity-10 p-2 rounded">
                <i class="bi bi-exclamation-circle text-danger"></i>
              </div>
            </div>
            <div class="stat-value text-danger" th:text="${#numbers.formatCurrency(currentDue)}">$250</div>
          </div>
        </div>
      </div>

      <div class="content-card p-0 overflow-hidden mb-5">
        <div class="px-4 py-3 border-bottom d-flex justify-content-between align-items-center bg-light">
          <h6 class="mb-0 fw-semibold text-dark">Recent Transactions</h6>
          <a th:href="@{/transactions}" class="text-decoration-none small text-primary fw-medium">View All</a>
        </div>

        <div class="table-responsive">
          <table class="table table-pro mb-0">
            <thead>
            <tr>
              <th class="ps-4">Date</th>
              <th>Merchant</th>
              <th>Amount</th>
              <th class="text-end pe-4">Status</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="txn : ${recentTransactions}">
              <td class="ps-4 text-secondary" th:text="${#temporals.format(txn.transactionDate, 'MMM dd, yyyy')}">Jan 01, 2025</td>
              <td>
                <div class="d-flex align-items-center">
                  <div class="bg-light rounded p-1 me-2 d-flex align-items-center justify-content-center border" style="width: 32px; height: 32px;">
                    <i class="bi bi-shop small text-secondary"></i>
                  </div>
                  <span class="text-dark fw-medium" th:text="${txn.merchantName}">Merchant</span>
                </div>
              </td>
              <td class="text-dark" th:text="${#numbers.formatCurrency(txn.amount)}">$0.00</td>
              <td class="text-end pe-4">
                                        <span class="badge rounded-pill fw-normal border"
                                              th:classappend="${txn.status == 'SUCCESS' ? 'border-success text-success bg-success bg-opacity-10' : 'border-danger text-danger bg-danger bg-opacity-10'}"
                                              style="font-size: 0.75rem;"
                                              th:text="${txn.status}">SUCCESS</span>
              </td>
            </tr>
            </tbody>
          </table>
        </div>
      </div>

    </main>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
